<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Home - AAROC DevOps</title>
  

  <link rel="shortcut icon" href="../../../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../../../css/highlight.css">
  <link href="../../../../site/css/base.css" rel="stylesheet">
  <link href="../../../../site/css/bootstrap-custom.min.css" rel="stylesheet">
  <link href="../../../../site/css/font-awesome-4.0.3.css" rel="stylesheet">
  <link href="../../../../site/css/highlight.css" rel="stylesheet">
  <link href="../../../../site/site/css/base.css" rel="stylesheet">
  <link href="../../../../site/site/css/bootstrap-custom.min.css" rel="stylesheet">
  <link href="../../../../site/site/css/font-awesome-4.0.3.css" rel="stylesheet">
  <link href="../../../../site/site/css/highlight.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Home";
    var mkdocs_page_input_path = "Roles/Ansible/roles/mysql/index.md";
    var mkdocs_page_url = "/Roles/Ansible/roles/mysql/";
  </script>
  
  <script src="../../../../js/jquery-2.1.1.min.js"></script>
  <script src="../../../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../../../js/highlight.pack.js"></script>
  <script src="../../../../js/theme.js"></script> 
  <script src="../../../../site/js/base.js"></script>
  <script src="../../../../site/js/bootstrap-3.0.3.min.js"></script>
  <script src="../../../../site/js/highlight.pack.js"></script>
  <script src="../../../../site/js/jquery-1.10.2.min.js"></script>
  <script src="../../../../site/mkdocs/js/lunr-0.5.7.min.js"></script>
  <script src="../../../../site/mkdocs/js/mustache.min.js"></script>
  <script src="../../../../site/mkdocs/js/require.js"></script>
  <script src="../../../../site/mkdocs/js/search.js"></script>
  <script src="../../../../site/mkdocs/js/text.js"></script>
  <script src="../../../../site/site/js/base.js"></script>
  <script src="../../../../site/site/js/bootstrap-3.0.3.min.js"></script>
  <script src="../../../../site/site/js/highlight.pack.js"></script>
  <script src="../../../../site/site/js/jquery-1.10.2.min.js"></script>
  <script src="../../../../site/site/mkdocs/js/lunr-0.5.7.min.js"></script>
  <script src="../../../../site/site/mkdocs/js/mustache.min.js"></script>
  <script src="../../../../site/site/mkdocs/js/require.js"></script>
  <script src="../../../../site/site/mkdocs/js/search.js"></script>
  <script src="../../../../site/site/mkdocs/js/text.js"></script>

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../../.." class="icon icon-home"> AAROC DevOps</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../../..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../../../Playbooks/">Playbooks</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../../../Services/">Services</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Roles</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../">Home</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Ansible</span></li>

        
            
    <ul class="subnav">
    <li><span>Playbooks</span></li>

        
            
    <ul class="subnav">
    <li><span>Top bdii</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../playbooks/top-bdii/">Home</a>
        
    </li>

        
    </ul>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Roles</span></li>

        
            
    <ul class="subnav">
    <li><span>Ansible executor</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ansible-executor/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Apache web server</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../apache-web-server/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Bootstrap</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../bootstrap/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Boundary monitor</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../boundary-monitor/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Container bootstrap</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../container-bootstrap/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Cvmfs</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../cvmfs/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Cvmfs static</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../cvmfs-static/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Discourse sso</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../discourse-sso/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Emi ui</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../emi-ui/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Emi worker node</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../emi-worker-node/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Fmarco76</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../fmarco76.IDPPublic/">Home</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../fmarco76.firewall/">Home</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../fmarco76.tomcat/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Geerlingguy</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../geerlingguy.repo-epel/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Glassfish</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../glassfish/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Head node</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../head-node/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Jenkins 2</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../jenkins-2.0/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Jenkins slave</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../jenkins-slave/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Ldap</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ldap/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Liferay csgf</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../liferay-csgf/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Liferay gridengine</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../liferay-gridengine/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Liferay mysql</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../liferay-mysql/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Mysql</span></li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Home</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#mysql-server">MySQL Server</a></li>
                
                    <li><a class="toctree-l4" href="#requirements">Requirements</a></li>
                
                    <li><a class="toctree-l4" href="#role-variables">Role Variables</a></li>
                
                    <li><a class="toctree-l4" href="#examples">Examples</a></li>
                
                    <li><a class="toctree-l4" href="#dependencies">Dependencies</a></li>
                
                    <li><a class="toctree-l4" href="#license">License</a></li>
                
                    <li><a class="toctree-l4" href="#author-information">Author Information</a></li>
                
            
            </ul>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Perun slave</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../perun-slave/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Shibboleth idp</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../shibboleth-idp/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Shibboleth sp</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../shibboleth-sp/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Site bdii tests</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../site-bdii-tests/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Slack nagios</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../slack-nagios/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Top bdii</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../top-bdii/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Umd</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../umd/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Umd3</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../umd3/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Worker node</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../worker-node/">Home</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Xrootd</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../xrootd/">Home</a>
        
    </li>

        
    </ul>

        
    </ul>

        
    </ul>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../..">AAROC DevOps</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../..">Docs</a> &raquo;</li>
    
      
        
          <li>Roles &raquo;</li>
        
      
        
          <li>Mysql &raquo;</li>
        
      
    
    <li>Home</li>
    <li class="wy-breadcrumbs-aside">
      
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="mysql-server">MySQL Server</h1>
<p>This roles helps to install MySQL Server across RHEL and Ubuntu variants.
Apart from installing the MySQL Server, it applies basic hardening, like
securing the root account with password, and removing test databases. The role
can also be used to add databases to the MySQL server and create users in the
database. It also supports configuring the databases for replication--both
master and slave can be configured via this role.</p>
<h2 id="requirements">Requirements</h2>
<p>This role requires Ansible 1.4 or higher, and platform requirements are listed
in the metadata file.</p>
<h2 id="role-variables">Role Variables</h2>
<p>The variables that can be passed to this role and a brief description about
them are as follows:</p>
<pre><code>  mysql_port: 3306                 # The port for mysql server to listen
  mysql_bind_address: "0.0.0.0"    # The bind address for mysql server
  mysql_root_db_pass: foobar       # The root DB password

  # A list that has all the databases to be
  # created and their replication status:
  mysql_db:                                 
       - name: foo
         replicate: yes
       - name: bar
         replicate: no

  # A list of the mysql users to be created
  # and their password and privileges:
  mysql_users:                              
       - name: benz
         pass: foobar
         priv: "*.*:ALL"

  # If the database is replicated the users
  # to be used for replication:
  mysql_repl_user:                          
    - name: repl
      pass: foobar

  # The role of this server in replication:
  mysql_repl_role: master

  # A unique id for the mysql server (used in replication):
  mysql_db_id: 7
</code></pre>
<h2 id="examples">Examples</h2>
<p>1) Install MySQL Server and set the root password, but don't create any
database or users.</p>
<pre><code>  - hosts: all
    roles:
    - {role: mysql, mysql_root_db_pass: foobar, mysql_db: none, mysql_users: none }
</code></pre>
<p>2) Install MySQL Server and create 2 databases and 2 users.</p>
<pre><code>  - hosts: all
    roles:
     - {role: mysql, mysql_db: [{name: benz},
                                {name: benz2}],
        mysql_users: [{name: ben3, pass: foobar, priv: "*.*:ALL"},
                      {name: ben2, pass: foo}] }
</code></pre>
<p>Note: If users are specified and password/privileges are not specified, then
default values are set.</p>
<p>3) Install MySQL Server and create 2 databases and 2 users and configure the
database as replication master with one database configured for replication.</p>
<pre><code>  - hosts: all
    roles:
     - {role: mysql, mysql_db: [{name: benz, replicate: yes },
                                { name: benz2, replicate: no}], 
                     mysql_users: [{name: ben3, pass: foobar, priv: "*.*:ALL"},
                                   {name: ben2, pass: foo}],
                     mysql_repl_user: [{name: repl, pass: foobar}] }
</code></pre>
<p>4) A fully installed/configured MySQL Server with master and slave
replication.</p>
<pre><code>  - hosts: master
    roles:
     - {role: mysql, mysql_db: [{name: benz}, {name: benz2}],
                     mysql_users: [{name: ben3, pass: foobar, priv: "*.*:ALL"},
                                   {name: ben2, pass: foo}],
                     mysql_db_id: 8 }

  - hosts: slave
    roles:
     - {role: mysql, mysql_db: none, mysql_users: none,
              mysql_repl_role: slave, mysql_repl_master: vm2,
              mysql_db_id: 9, mysql_repl_user: [{name: repl, pass: foobar}] }
</code></pre>
<p>Note: When configuring the full replication please make sure the master is
configured via this role and the master is available in inventory and facts
have been gathered for master. The replication tasks assume the database is
new and has no data.</p>
<h2 id="dependencies">Dependencies</h2>
<p>None</p>
<h2 id="license">License</h2>
<p>BSD</p>
<h2 id="author-information">Author Information</h2>
<p>Benno Joy</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../perun-slave/" class="btn btn-neutral float-right" title="Home">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../liferay-mysql/" class="btn btn-neutral" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../liferay-mysql/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../perun-slave/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
