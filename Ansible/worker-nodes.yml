---

#- hosts: worker-nodes
#  name: bootstrap the worker nodes
#  user: ansible
#  sudo: true
#  sudo_user: root
#  roles:
#    - bootstrap
#  vars_files:
#    - roles/common/vars/distros/{{ ansible_distribution }}-{{ ansible_distribution_version }}.yml
#    - roles/common/vars/middleware/igtf.yml
- hosts: worker-nodes
  name: set google public dns
  linenfile: dest=/etc/resolv.conf regexp=^nameserver= line=nameserver=8.8.8.8
  

- hosts: worker-nodes
  name: install and configure worker-nodes
  delegate_to: ce01-node001.c4.csir.co.za 
  roles:
    - bootstrap 
    - common
    - certificates    
    - umd
    - worker-nodes
    - yaim
    - torque
  vars_files:
    - roles/common/vars/distros/{{ ansible_distribution }}-{{ ansible_distribution_version }}.yml
    - roles/common/vars/middleware/igtf.yml
 
